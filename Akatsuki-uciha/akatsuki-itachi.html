<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Itachi Overlay - Live Sync</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; overflow: hidden; background: transparent; }
        
        /* Box Chat Utama */
        #chat-container {
            position: absolute;
            bottom: 20px;
            left: 20px;
            padding: 15px;
            min-width: 300px;
            max-width: 450px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .itachi-img { width: 80px; height: auto; filter: drop-shadow(0 0 10px rgba(218, 3, 3, 0.5)); }
        .text-content { color: white; font-family: sans-serif; }
        .user-name { font-weight: 800; color: #da0303; margin-bottom: 2px; text-transform: uppercase; }
        
        /* Icon Sharingan Kecil */
        .sharingan { width: 15px; height: 15px; background: url('https://antoyusri021-debug.github.io/Overlay-Webdev/Akatsuki-uciha/sharingan-icon.png') no-repeat center; background-size: contain; position: absolute; top: 10px; right: 10px; }
    </style>
</head>
<body>

    <div id="chat-container">
        <img src="https://antoyusri021-debug.github.io/Overlay-Webdev/Akatsuki-uciha/itachi.png" class="itachi-img" alt="Itachi">
        <div class="text-content">
            <div class="user-name" id="display-name">Itachi_Uchiha</div>
            <div class="message" id="display-msg">Kotoamatsukami... Dunia ini ada dalam genggamanku.</div>
        </div>
        <div class="sharingan"></div>
    </div>

<script>
    function applyStyles() {
        const params = new URLSearchParams(window.location.search);
        const container = document.getElementById('chat-container');
        
        // 1. Ambil Parameter Radius & Font
        const radius = params.get('radius') || '40';
        const fontSize = params.get('font') || '19';
        container.style.borderRadius = radius + 'px';
        document.getElementById('display-msg').style.fontSize = fontSize + 'px';

        // 2. Logika Warna (Solid vs Gradient)
        const grad = params.get('grad');
        const bg = params.get('bg');
        const opac = params.get('opac') || '1';

        if (grad) {
            const colors = grad.split(',');
            container.style.background = `linear-gradient(135deg, #${colors[0]}, #${colors[1]})`;
        } else if (bg) {
            // Convert Hex to RGBA untuk Opacity
            const r = parseInt(bg.substring(0,2), 16);
            const g = parseInt(bg.substring(2,4), 16);
            const b = parseInt(bg.substring(4,6), 16);
            container.style.background = `rgba(${r}, ${g}, ${b}, ${opac})`;
        } else {
            container.style.background = 'rgba(0, 0, 0, 0.8)'; // Default
        }
    }

    // Jalankan saat load
    applyStyles();

    // Listener buat Live Preview dari Editor (tanpa refresh)
    window.addEventListener('message', (event) => {
        const data = event.data;
        const container = document.getElementById('chat-container');
        
        container.style.borderRadius = data.radius + 'px';
        document.getElementById('display-msg').style.fontSize = data.font + 'px';
        
        if (data.useGrad) {
            container.style.background = `linear-gradient(135deg, ${data.g1}, ${data.g2})`;
        } else {
            const hex = data.color1.replace('#', '');
            const r = parseInt(hex.substring(0,2), 16);
            const g = parseInt(hex.substring(2,4), 16);
            const b = parseInt(hex.substring(4,6), 16);
            container.style.background = `rgba(${r}, ${g}, ${b}, ${data.opac})`;
        }
    });
</script>
</body>
</html>
