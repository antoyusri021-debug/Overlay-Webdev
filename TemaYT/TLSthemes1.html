<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap');
        
        body { 
            margin: 0; padding: 10px; background: transparent; 
            font-family: 'Montserrat', sans-serif;
        }

        /* PAKSA MUNCUL DULU BIAR KELIHATAN DI APLIKASI */
        #main-container {
            display: flex; flex-direction: column;
            background: rgba(20, 20, 20, 0.95);
            border-radius: 15px; padding: 15px; color: white;
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 330px; min-height: 110px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .top-section { display: flex; align-items: center; margin-bottom: 10px; }
        .visual-disk {
            width: 40px; height: 40px; background: #444;
            border-radius: 50%; margin-right: 12px;
            animation: spin 3s linear infinite; flex-shrink: 0;
        }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .info { flex-grow: 1; overflow: hidden; }
        .title { font-size: 14px; font-weight: 800; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .artist { font-size: 10px; color: #aaa; }

        .controls {
            display: flex; align-items: center; justify-content: space-between;
            padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.1);
        }
        .debug-msg { font-size: 9px; color: yellow; font-family: monospace; }
    </style>
</head>
<body>

<div id="main-container">
    <div class="top-section">
        <div class="visual-disk"></div>
        <div class="info">
            <div id="title-text" class="title">Checking File...</div>
            <div id="artist-text" class="artist">Please Wait</div>
        </div>
    </div>
    <div class="controls">
        <div id="debug-info" class="debug-msg">Status: Booting...</div>
    </div>
</div>

<script>
    const titleLabel = document.getElementById('title-text');
    const artistLabel = document.getElementById('artist-text');
    const debugLabel = document.getElementById('debug-info');

    async function checkFile() {
        // Karena HTML di dalam folder 'temaYT', kita harus naik satu tingkat (../)
        const targetFile = '../judul_lagu.txt';
        
        try {
            const response = await fetch(targetFile + '?t=' + Date.now());
            if (response.ok) {
                const text = await response.text();
                if (text.trim()) {
                    let parts = text.split(' - ');
                    titleLabel.innerText = parts[0].trim();
                    artistLabel.innerText = parts.length > 1 ? parts[1].trim() : "YouTube Music";
                    debugLabel.innerText = "Status: Berhasil Membaca";
                } else {
                    debugLabel.innerText = "Status: File Kosong";
                }
            } else {
                debugLabel.innerText = "Status: File Tak Ditemukan (404)";
            }
        } catch (e) {
            debugLabel.innerText = "Status: Error Fetching";
        }
    }

    setInterval(checkFile, 2000);
    checkFile();
</script>
</body>
</html>
